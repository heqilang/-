webpackJsonp([48],{2205:function(t,e,a){var r=a(2206);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(1114)("09a1e62f",r,!0)},2206:function(t,e,a){e=t.exports=a(1113)(),e.push([t.i,"",""])},2207:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(67),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{search:{dictValue:""},tableData:[],form:{id:"",dictValue:"",dictCode:""},formRules:{dictValue:[{required:!0,message:"请输入系统名称",trigger:"blur"}],dictCode:[{required:!0,message:"请选择系统编码",trigger:"blur"}]},drawerTitle:"",showDrawer:!1,pager:{pageSize:10,pageIndex:1,total:null},value:"",input:""}},methods:{getListSearch:function(){this.pager.pageIndex=1,this.pager.pageSize=10,this.getList()},clearSearch:function(){this.search={dictValue:""}},clearFormInfo:function(){this.form={id:"",dictValue:"",dictCode:""}},handleChangeState:function(t){var e=this;e._http({url:"/api/admin/gateway/updateState",type:"put",isBody:!0,data:{ids:t.id,state:"01"==t.state?"09":"01"},success:function(t){e.getList()}})},closeDrawer:function(){this.$refs.form.resetFields(),this.showDrawer=!1},onFormSubmit:function(){console.log("submit!");var t=this;t.$refs.form.validate(function(e){if(!e)return console.log("error submit!!"),!1;t._http({url:t.form.id?"/api/admin/equipmentSystem/update":"/api/admin/equipmentSystem/add",type:t.form.id?"put":"post",isBody:!0,data:t.form,success:function(e){t.getList(),t.closeDrawer()}})})},handleDelete:function(t){var e=this,a=this;a.$confirm("此操作将永久删除设备系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(123),a._http({url:"/api/admin/equipmentSystem/remove/"+t.id,type:"delete",success:function(t){a.$message({message:"删除成功",type:"success"}),a.getList()}})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleEdit:function(t){this.drawerTitle="编辑设备系统",this.clearFormInfo();for(var e in this.form)t.hasOwnProperty(e)&&(this.form[e]=t[e]);this.showDrawer=!0},showDrawerFn:function(){this.drawerTitle="添加设备系统",this.clearFormInfo(),this.showDrawer=!0},handleDrawerClose:function(){this.closeDrawer()},getList:function(){var t=this;t.loading=!0;var e=(0,i.default)({size:t.pager.pageSize,current:t.pager.pageIndex},t.search);for(var a in e)""==e[a]&&delete e[a];e["dictValue.symbol"]="LIKE",t._http({url:"/api/admin/equipmentSystem/find",type:"get",isBody:!0,data:e,success:function(e){t.tableData=e.data.records,t.pager.total=e.data.total,t.loading=!1}})},indexMethod:function(t){var e=this;if(e.pager.pageIndex*e.pager.pageSize>e.totalCount){var a=t+1+e.pager.pageSize*(e.pager.pageIndex-1);return a<e.totalCount?a:e.totalCount}return t+1+e.pager.pageSize*(e.pager.pageIndex-1)},initPage:function(){var t=document.getElementById("searchTop"),e=t.offsetHeight;console.log(e),document.getElementById("mainPageTable").style.minHeight="calc(100% - "+(20+Number(e))+"px)",this.getList()}},created:function(){},mounted:function(){this.initPage()}}},2208:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"searchTop",attrs:{id:"searchTop"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-col",{staticClass:"text_r",attrs:{span:6}},[t._v("系统名称：")]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{staticClass:"w250 mar-r-18",attrs:{placeholder:"请输入设备系统名称"},model:{value:t.search.dictValue,callback:function(e){t.$set(t.search,"dictValue",e)},expression:"search.dictValue"}})],1)],1),t._v(" "),a("el-col",{staticClass:"mar-t-18"},[a("el-button",{staticClass:"btn-search w100 mar-r-18",attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("重置")]),t._v(" "),a("el-button",{staticClass:"btn-search w100 mar-r-18",attrs:{type:"primary"},on:{click:t.getListSearch}},[a("i",{staticClass:"iconfont iconsousuo"}),t._v("查询")]),t._v(" "),a("el-button",{staticClass:"btn-add w100 mar-r-18",attrs:{type:"primary"},on:{click:t.showDrawerFn}},[a("i",{staticClass:"iconfont icontianjia-"}),t._v("添加")])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"mainPageTable mar-t-18",attrs:{id:"mainPageTable"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",width:"70",label:"序号",fixed:"left",index:t.indexMethod,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"dictValue",label:"设备系统名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"dictCode",label:"系统编码"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"address",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"text_c mar-t-18"},[0!==t.pager.total?a("customPagination",{attrs:{paginationData:t.pager},on:{getList:t.getList}}):t._e()],1)],1),t._v(" "),a("el-drawer",{attrs:{"append-to-body":"",title:t.drawerTitle,size:"58%",modal:"",wrapperClosable:"",visible:t.showDrawer,direction:"rtl","before-close":t.handleDrawerClose},on:{"update:visible":function(e){t.showDrawer=e}}},[a("div",{staticClass:"drawer-formBox"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"138px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"系统名称",prop:"dictValue"}},[a("el-input",{attrs:{placeholder:"请输入字典名称",maxlength:"50","show-word-limit":""},model:{value:t.form.dictValue,callback:function(e){t.$set(t.form,"dictValue",e)},expression:"form.dictValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"系统编码",prop:"dictCode"}},[a("el-input",{attrs:{placeholder:"请输入字典名称",maxlength:"50","show-word-limit":""},model:{value:t.form.dictCode,callback:function(e){t.$set(t.form,"dictCode",e)},expression:"form.dictCode"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onFormSubmit}},[t._v("提交")]),t._v(" "),a("el-button",{on:{click:t.closeDrawer}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]}},428:function(t,e,a){a(2205);var r=a(3)(a(2207),a(2208),null,null);t.exports=r.exports}});