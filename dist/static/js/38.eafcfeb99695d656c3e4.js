webpackJsonp([38],{1654:function(e,t,a){var l=a(1655);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(1114)("17568adf",l,!0)},1655:function(e,t,a){t=e.exports=a(1113)(),t.push([e.i,".risk-list-wrapper{padding:51px 25px 70px}",""])},1656:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{dataRange:{required:!1},riskLevel:{required:!1},riskStatus:{required:!1},riskType:{required:!1}},data:function(){return{searchModel:{riskLevel:void 0,riskStatus:void 0,riskType:void 0},pager:{pageSize:10,pageIndex:1,total:0},dataTable:[],dataRiskLevel:[],dataRiskLevelJson:{0:"一般隐患",1:"重大隐患"},dataRiskType:[],dataRiskTypeJson:{},dataRiskStatus:[{dictValue:"逾期未整改",dictCode:"1"},{dictValue:"限期未整改",dictCode:"2"},{dictValue:"逾期已整改",dictCode:"3"},{dictValue:"未整改",dictCode:"4"},{dictValue:"已整改",dictCode:"5"}],dataRiskStatusJson:{1:"逾期未整改",2:"限期未整改",3:"逾期已整改",4:"未整改",5:"已整改"},status:[{label:"待处理",value:"01"},{label:"待确认",value:"02"},{label:"处理中",value:"03"},{label:"完成",value:"04"},{label:"忽略",value:"05"}],statusJson:{"01":"待处理","02":"待确认","03":"处理中","04":"完成","05":"忽略"}}},watch:{riskLevel:{immediate:!0,handler:function(e,t){this.searchModel.riskLevel=e}},riskStatus:{immediate:!0,handler:function(e,t){this.searchModel.riskStatus=e}},riskType:{immediate:!0,handler:function(e,t){this.searchModel.riskType=e}}},created:function(){this.getDataListLevel(),this.getDataListType()},mounted:function(){this.loadListData()},methods:{search:function(){this.pager.pageIndex=1,this.loadListData()},loadListData:function(){var e=this;e._http({url:"/api/web/indexCountV3/findRisksList",type:"get",isBody:!0,data:{current:e.pager.pageIndex,size:e.pager.pageSize,timeType:"当日"===e.dataRange?1:2,level:e.searchModel.riskLevel||void 0,risksType:e.searchModel.riskType||void 0,handel:e.searchModel.riskStatus||void 0,sorts:"handleReportTime:desc",transform:"U:reporter,U:handler"},success:function(t){e.dataTable=t.data.records||[],e.pager.pageSize=t.data.size,e.pager.pageIndex=t.data.current,e.pager.total=t.data.total}})},getDataListLevel:function(){var e=this;e._http({url:"/api/auth/dict/dictItem",type:"get",isBody:!0,data:{parentCode:"riskLevel"},success:function(t){e.dataRiskLevel=t.data||[],e.dataRiskLevel.forEach(function(t){e.dataRiskLevelJson[t.dictCode]=t.dictValue})}})},getDataListType:function(){var e=this;e._http({url:"/api/auth/dict/dictItem",type:"get",isBody:!0,data:{parentCode:"riskType"},success:function(t){e.dataRiskType=t.data||[],e.dataRiskType.forEach(function(t){e.dataRiskTypeJson[t.dictCode]=t.dictValue})}})},handleSizeChange:function(e){this.pageSize=e,this.loadListData()},handleCurrentChange:function(e){this.pageIndex=e,this.loadListData()},handleViewDetailClick:function(e){e.risksTypeText=this.dataRiskLevelJson[e.troubleType],e.levelText=this.dataRiskLevelJson[e.level],e.stateText=this.dataRiskStatusJson[e.completeStatus],this.$emit("viewDetailOnclick",e)},changeRiskLevel:function(e){this.searchModel.riskLevel=e,this.loadListData()},changeRiskStatus:function(e){this.searchModel.riskStatus=e,this.loadListData()},changeRiskType:function(e){this.searchModel.riskType=e,this.loadListData()}}}},1657:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"risk-list-wrapper",staticStyle:{height:"720px"}},[a("el-form",{staticClass:"xf-form",attrs:{inline:!0,model:e.searchModel,size:"small"}},[a("el-form-item",{attrs:{label:"隐患级别"}},[a("el-select",{attrs:{clearable:"",placeholder:"隐患级别"},on:{change:e.changeRiskLevel},model:{value:e.searchModel.riskLevel,callback:function(t){e.$set(e.searchModel,"riskLevel",t)},expression:"searchModel.riskLevel"}},[a("el-option",{attrs:{label:"一般隐患",value:0}}),e._v(" "),a("el-option",{attrs:{label:"重大隐患",value:1}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"整改状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"整改状态"},on:{change:e.changeRiskStatus},model:{value:e.searchModel.riskStatus,callback:function(t){e.$set(e.searchModel,"riskStatus",t)},expression:"searchModel.riskStatus"}},[a("el-option",{attrs:{label:"逾期未整改",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"限期未整改",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"逾期已整改",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"未整改",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"已整改",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"隐患类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"隐患类型"},on:{change:e.changeRiskType},model:{value:e.searchModel.riskType,callback:function(t){e.$set(e.searchModel,"riskType",t)},expression:"searchModel.riskType"}},e._l(e.dataRiskType,function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictValue,value:e.dictCode}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticClass:"xf-table",staticStyle:{width:"100%"},attrs:{data:e.dataTable,height:"540"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"risksType",label:"隐患类型","show-overflow-tooltip":!0,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.dataRiskLevelJson[t.row.troubleType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"上报人员","show-overflow-tooltip":!0,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.createUser||"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"上报时间","show-overflow-tooltip":!0,width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"所属区域","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.area||"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"troubleLocation",label:"详细地址","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.troubleLocation||"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"整改状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.dataRiskStatusJson[t.row.completeStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"隐患级别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.dataRiskLevelJson[t.row.troubleType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleViewDetailClick(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("div",{staticClass:"text_c mar-t-18"},[0!==e.pager.total?a("customPagination",{attrs:{paginationData:e.pager},on:{getList:e.loadListData}}):e._e()],1)],1)},staticRenderFns:[]}},388:function(e,t,a){a(1654);var l=a(3)(a(1656),a(1657),null,null);e.exports=l.exports}});